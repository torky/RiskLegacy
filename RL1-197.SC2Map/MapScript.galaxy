//Must be first
include "TriggerLibs/NativeLib"

//Level 0
include "scripts/start/Start"
include "scripts/ui/UI"
include "scripts/players/Players"
include "scripts/units/Units"
include "scripts/bases/Bases" 

//Level 1
include "scripts/countries/Country"

//Level 2 
include "scripts/countries/PredefineCountries"

//Level 2.5 Should run after Level 2, but Level 2 isn't required for level 2.5 to compile
include "scripts/bases/Defender"
include "scripts/bases/DistributeTerritories" 
include "scripts/income/Income"

//Level 3
include "scripts/refresh/Refresh"

//Level 4
include "scripts/modes/1v1"
include "scripts/modes/Custom"
include "scripts/modes/Empire"
include "scripts/modes/Quick"
include "scripts/modes/Solo"
include "scripts/modes/Teams"
include "scripts/modes/Tutorial"

void InitLibs () {
    libNtve_InitLib();
}

trigger gt_GameModeSelect;

bool gt_GameModeSelect_Func (bool testConds, bool runActions) {
    string gameMode;
    string modeQuick;
    string mode1v1;
    string modeEmpire;
    string modeCustom;
    string modeTutorial;
    string modeSolo;
    string modeTeams;
    playergroup players;

    modeQuick = "0001";
    mode1v1 = "0007";
    modeEmpire = "0006";
    modeCustom = "0002";
    modeTutorial = "0003";
    modeSolo = "0004";
    modeTeams = "0005";
    
    gameMode = GameAttributeGameValue("1");
    DeleteStupidRocks();
    VisEnable(c_visTypeMask, false);
    VisEnable(c_visTypeFog, false);
    PredefineCountries();
    InitializeBases();

    players = PlayerGroupActive();
    DistributeTerritories(players);

    RefreshIncome();

    SetupUI();
    InfoCreate();

    if (gameMode == modeQuick) {
        UIDisplayMessage(PlayerGroupActive(), c_messageAreaChat, StringToText("Quick"));

    }else if (gameMode == mode1v1) {
        UIDisplayMessage(PlayerGroupActive(), c_messageAreaChat, StringToText("1v1"));

    }else if (gameMode == modeEmpire) {
        UIDisplayMessage(PlayerGroupActive(), c_messageAreaChat, StringToText("Empire"));

    }else if (gameMode == modeCustom) {
        UIDisplayMessage(PlayerGroupActive(), c_messageAreaChat, StringToText("Custom"));
        
    }else if (gameMode == modeTutorial) {
        UIDisplayMessage(PlayerGroupActive(), c_messageAreaChat, StringToText("Tutorial"));

    }else if (gameMode == modeSolo) {
        UIDisplayMessage(PlayerGroupActive(), c_messageAreaChat, StringToText("Solo"));

    }else if (gameMode == modeTeams) {
        UIDisplayMessage(PlayerGroupActive(), c_messageAreaChat, StringToText("Teams"));

    }

    return true;
}

void gt_GameModeSelect_Init () {
    gt_GameModeSelect = TriggerCreate("gt_GameModeSelect_Func");
    TriggerAddEventMapInit(gt_GameModeSelect);
}

void InitTriggers () {
    gt_SetupPlayers_Init();
    gt_GameModeSelect_Init();
    gt_SwapDefender_Init();
}

void InitMap () {
    InitLibs();
    InitTriggers();
}


